<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet"/>
  <style>
    body {
      background-color: #f5f7fa;
      font-family: 'Segoe UI', sans-serif;
    }
    header {
      background-color: #023246;
      color: #fff;
      text-align: center;
      padding: 16px 0;
      font-size: 26px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .card {
      border: none;
      border-radius: 14px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
    }
    .card-title {
      font-size: 1.1rem;
      font-weight: 600;
    }
    .dashboard-title {
      font-size: 20px;
      font-weight: bold;
      color: #023246;
      margin-top: 40px;
    }
    .btn-primary {
      background-color: #023246;
      border: none;
    }
    .btn-primary:hover {
      background-color: #03506f;
    }
  </style>
</head>
<body>
  <header>Admin Dashboard â€“ Smart Attendance System</header>
  <div class="container my-4">
    <h5 class="dashboard-title">Overall Summary</h5>
    <div class="row g-4 mb-3">
      <div class="col-md-6">
        <div class="card p-3 text-center">
          <h6 class="card-title"><i class="bi bi-building"></i> Total Classes</h6>
          <p class="display-6" id="totalClasses">--</p>
        </div>
      </div>
      <div class="col-md-6">
        <div class="card p-3 text-center">
          <h6 class="card-title"><i class="bi bi-calendar-x"></i> Total Holidays</h6>
          <p class="display-6 text-danger" id="totalHolidays">--</p>
        </div>
      </div>
    </div>

    <h5 class="dashboard-title">Class-wise Summary</h5>
    <div class="row g-4" id="classSummaryContainer"></div>

    <h5 class="dashboard-title">Admin Operations</h5>
    <div class="row g-4">
      <div class="col-md-3">
        <div class="card p-3 text-center">
          <h6 class="card-title"><i class="bi bi-plus-circle"></i> Manage Classes</h6>
          <button class="btn btn-primary w-100" data-bs-toggle="modal" data-bs-target="#classesModal">Open</button>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card p-3 text-center">
          <h6 class="card-title"><i class="bi bi-person-circle"></i> Manage Students</h6>
          <button class="btn btn-primary w-100" data-bs-toggle="modal" data-bs-target="#studentsModal">Open</button>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card p-3 text-center">
          <h6 class="card-title"><i class="bi bi-calendar2-event"></i> Manage Holidays</h6>
          <button class="btn btn-primary w-100" data-bs-toggle="modal" data-bs-target="#holidaysModal">Open</button>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card p-3 text-center">
          <h6 class="card-title"><i class="bi bi-journal-text"></i> View Write Logs</h6>
          <button class="btn btn-primary w-100" data-bs-toggle="modal" data-bs-target="#logsModal">Open</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="classesModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Manage Classes</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <ul id="classList" class="list-group mb-3"></ul>
          <input type="text" id="newClassInput" class="form-control mb-2" placeholder="New Class ID"/>
          <button onclick="addClass()" class="btn btn-success w-100">Add Class</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="studentsModal" tabindex="-1">
    <div class="modal-dialog modal-xl">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Manage Students</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <table class="table table-bordered table-striped align-middle">
            <thead class="table-dark">
              <tr>
                <th>Student ID</th>
                <th>Name</th>
                <th>Class ID</th>
                <th>Contact</th>
                <th>Gender</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="studentTableBody"></tbody>
          </table>
          <h6 class="mt-4">Add New Student</h6>
          <div class="row g-2">
            <div class="col-md-2"><input type="text" id="newStudentID" class="form-control" placeholder="Student ID" /></div>
            <div class="col-md-2"><input type="text" id="newStudentName" class="form-control" placeholder="Name" /></div>
            <div class="col-md-2"><input type="text" id="newStudentClass" class="form-control" placeholder="Class ID" /></div>
            <div class="col-md-3"><input type="text" id="newStudentContact" class="form-control" placeholder="Contact" /></div>
            <div class="col-md-2">
              <select id="newStudentGender" class="form-select">
                <option value="">Gender</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="Other">Other</option>
              </select>
            </div>
            <div class="col-md-1"><button onclick="addStudent()" class="btn btn-success w-100">Add</button></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="holidaysModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Manage Holidays</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <ul class="list-group mb-3" id="holidayList"></ul>
          <input type="text" id="newHoliday" class="form-control mb-2" placeholder="Add new holiday"/>
          <button onclick="addHoliday()" class="btn btn-success w-100">Add Holiday</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="logsModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Write Logs</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <ul class="list-group">
            <li class="list-group-item">[2025-06-30] Vivek marked attendance for C101</li>
            <li class="list-group-item">[2025-06-29] Holiday added: Independence Day</li>
            <li class="list-group-item">[2025-06-28] Student added to C102</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <script>
    const classes = [
      { id: "C101", students: 25, avgAttendance: 86.4, logs: 72 },
      { id: "C102", students: 22, avgAttendance: 78.2, logs: 63 },
      { id: "C103", students: 30, avgAttendance: 91.0, logs: 88 },
    ];

    let students = [
      { id: "S01", name: "Akhil", classId: "C101", contact: "9876543210", gender: "Male" },
      { id: "S02", name: "Bhanu", classId: "C101", contact: "9012345678", gender: "Male" }
    ];

    let holidays = ["New Year", "Republic Day", "Independence Day"];

    const classSummaryContainer = document.getElementById("classSummaryContainer");
    const classList = document.getElementById("classList");
    const holidayList = document.getElementById("holidayList");

    document.getElementById("totalClasses").textContent = classes.length;
    document.getElementById("totalHolidays").textContent = holidays.length;

    function renderClasses() {
      classSummaryContainer.innerHTML = "";
      classList.innerHTML = "";
      classes.forEach((cls, index) => {
        classSummaryContainer.innerHTML += `
          <div class="col-md-4">
            <div class="card p-3">
              <h6 class="card-title">Class ID: ${cls.id}</h6>
              <ul class="list-group list-group-flush">
                <li class="list-group-item">Total Students: <strong>${cls.students}</strong></li>
                <li class="list-group-item">Average Attendance: <strong class="${cls.avgAttendance < 75 ? 'text-danger' : 'text-success'}">${cls.avgAttendance}%</strong></li>
                <li class="list-group-item">Write Logs: <strong>${cls.logs}</strong></li>
              </ul>
            </div>
          </div>`;
        classList.innerHTML += `<li class="list-group-item d-flex justify-content-between align-items-center">
          ${cls.id} <button class="btn btn-sm btn-danger" onclick="deleteClass(${index})">Delete</button>
        </li>`;
      });
    }

    function renderHolidays() {
      holidayList.innerHTML = "";
      holidays.forEach((h, index) => {
        holidayList.innerHTML += `<li class="list-group-item d-flex justify-content-between align-items-center">
          ${h} <button class="btn btn-sm btn-danger" onclick="deleteHoliday(${index})">Delete</button>
        </li>`;
      });
      document.getElementById("totalHolidays").textContent = holidays.length;
    }

    function addClass() {
      const input = document.getElementById("newClassInput");
      const val = input.value.trim();
      if (val) {
        classes.push({ id: val, students: 0, avgAttendance: 0, logs: 0 });
        input.value = "";
        renderClasses();
        document.getElementById("totalClasses").textContent = classes.length;
      }
    }

    function deleteClass(index) {
      classes.splice(index, 1);
      renderClasses();
      document.getElementById("totalClasses").textContent = classes.length;
    }

    function addHoliday() {
      const input = document.getElementById("newHoliday");
      const val = input.value.trim();
      if (val) {
        holidays.push(val);
        input.value = "";
        renderHolidays();
      }
    }

    function deleteHoliday(index) {
      holidays.splice(index, 1);
      renderHolidays();
    }

    function renderStudentTable() {
      const table = document.getElementById("studentTableBody");
      table.innerHTML = "";
      if (students.length === 0) {
        table.innerHTML = `<tr><td colspan="6" class="text-center text-muted">No students found</td></tr>`;
        return;
      }
      students.forEach((stu, index) => {
        table.innerHTML += `
          <tr>
            <td><input class="form-control editable" value="${stu.id}" onchange="editStudent(${index}, 'id', this.value)" /></td>
            <td><input class="form-control editable" value="${stu.name}" onchange="editStudent(${index}, 'name', this.value)" /></td>
            <td><input class="form-control editable" value="${stu.classId}" onchange="editStudent(${index}, 'classId', this.value)" /></td>
            <td><input class="form-control editable" value="${stu.contact}" onchange="editStudent(${index}, 'contact', this.value)" /></td>
            <td>
              <select class="form-select editable" onchange="editStudent(${index}, 'gender', this.value)">
                <option ${stu.gender === "Male" ? "selected" : ""}>Male</option>
                <option ${stu.gender === "Female" ? "selected" : ""}>Female</option>
                <option ${stu.gender === "Other" ? "selected" : ""}>Other</option>
              </select>
            </td>
            <td><button class="btn btn-danger btn-sm" onclick="deleteStudent(${index})">Delete</button></td>
          </tr>`;
      });
    }

    function addStudent() {
      const id = document.getElementById("newStudentID").value.trim();
      const name = document.getElementById("newStudentName").value.trim();
      const classId = document.getElementById("newStudentClass").value.trim();
      const contact = document.getElementById("newStudentContact").value.trim();
      const gender = document.getElementById("newStudentGender").value;
      if (!id || !name || !classId || !contact || !gender) {
        alert("Please fill all fields");
        return;
      }
      students.push({ id, name, classId, contact, gender });
      document.getElementById("newStudentID").value = "";
      document.getElementById("newStudentName").value = "";
      document.getElementById("newStudentClass").value = "";
      document.getElementById("newStudentContact").value = "";
      document.getElementById("newStudentGender").value = "";
      renderStudentTable();
    }

    function editStudent(index, field, value) {
      students[index][field] = value.trim();
    }

    function deleteStudent(index) {
      if (confirm("Are you sure you want to delete this student?")) {
        students.splice(index, 1);
        renderStudentTable();
      }
    }

    document.getElementById("studentsModal").addEventListener("show.bs.modal", renderStudentTable);
    renderClasses();
    renderHolidays();
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
